(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-01c4595e"],{"0e9d":function(e,t,i){"use strict";var a,n,o,r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("el-form",{ref:"postFormRef",attrs:{model:e.postForm,rules:e.postFormRules,"label-width":"120px","label-suffix":"："}},[i("edit-goods-info-detail",{ref:"infoFormRef",attrs:{"is-edit":e.isEdit},model:{value:e.postForm,callback:function(t){e.postForm=t},expression:"postForm"}}),e._v(" "),i("edit-goods-brand-detail",{ref:"brandFormRef",attrs:{"is-edit":e.isEdit},model:{value:e.postForm,callback:function(t){e.postForm=t},expression:"postForm"}}),e._v(" "),i("edit-goods-fav-detail",{ref:"favFormRef",attrs:{"is-edit":e.isEdit},model:{value:e.postForm,callback:function(t){e.postForm=t},expression:"postForm"}}),e._v(" "),i("el-form-item",[i("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.handleSumbit}},[e._v("提 交")]),e._v(" "),i("el-button",{on:{click:e.handleCancel}},[e._v("取 消")])],1)],1)],1)},s=[],l=(i("ac6a"),i("5df3"),i("c40e")),u=i("ed08"),d=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("el-form",{ref:"goodsInfoFormRef",attrs:{model:e.value,rules:e.goodsInfoFormRules,"label-width":"120px","label-suffix":"："}},[i("el-form-item",{attrs:{label:"名称",prop:"name"}},[i("el-input",{model:{value:e.value.name,callback:function(t){e.$set(e.value,"name",t)},expression:"value.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"价格",prop:"price"}},[i("el-input-number",{model:{value:e.value.price,callback:function(t){e.$set(e.value,"price",t)},expression:"value.price"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"大小"}},[i("el-select",{attrs:{placeholder:"请输入大小"},model:{value:e.value.size,callback:function(t){e.$set(e.value,"size",t)},expression:"value.size"}},e._l(e.sizeStatusOptions,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"人群限定"}},[i("el-radio-group",{on:{change:e.handleSexLimitChange},model:{value:e.selectedSexLimit,callback:function(t){e.selectedSexLimit=t},expression:"selectedSexLimit"}},e._l(e.sexLimitStatusOptions,(function(t){return i("el-radio",{key:t.id,attrs:{label:t.id}},[e._v("\n          "+e._s(t.name)+"\n        ")])})),1),e._v(" "),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.selectedSexLimit===e.sexLimitStatus.LIMIT,expression:"selectedSexLimit === sexLimitStatus.LIMIT"}],attrs:{prop:"gender","label-width":"96px"}},[i("el-select",{attrs:{multiple:"",placeholder:"请选择性别/可多选"},model:{value:e.value.gender,callback:function(t){e.$set(e.value,"gender",t)},expression:"value.gender"}},e._l(e.sexStatusOptions,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1)],1)],1)},c=[],f=i("bd86"),m={MIDDLE:1,BIG:2,SUPERBIG:3},p=(a={},Object(f["a"])(a,m.MIDDLE,"中杯"),Object(f["a"])(a,m.BIG,"大杯"),Object(f["a"])(a,m.SUPERBIG,"超大杯"),a),v=Object(u["a"])(m,p),b={UNLIMIT:0,LIMIT:1},h=(n={},Object(f["a"])(n,b.UNLIMIT,"不限定"),Object(f["a"])(n,b.LIMIT,"限定"),n),g=Object(u["a"])(b,h),O={MALE:1,FEMALE:2},F=(o={},Object(f["a"])(o,O.MALE,"男性"),Object(f["a"])(o,O.FEMALE,"女性"),o),x=Object(u["a"])(O,F),E=(i("0644"),{name:"EditGoodsInfoDetail",props:{value:Object,isEdit:{type:Boolean,default:!1}},data:function(){return{hasInit:!1,selectedSexLimit:null,sexLimitStatus:b,sexStatusOptions:x,sizeStatusOptions:v,sexLimitStatusOptions:g,goodsInfoFormRules:{name:[{required:!0,message:"请输入商品名称",trigger:"blur"},{min:2,max:140,message:"长度在 2 到 140 个字符",trigger:"blur"}],price:[{required:!0,message:"请输入价格",trigger:"blur"}]}}},methods:{initEdit:function(){var e=this.value;e.price=e.price/100,e.gender&&(this.setGender(e.gender),this.value.gender=JSON.parse(e.gender))},getData:function(e){return e.price=100*e.price,e.gender=JSON.stringify(e.gender),e},validate:function(){return this.$refs.goodsInfoFormRef.validate()},handleSexLimitChange:function(e){e===b.LIMIT&&(this.value.gender=[])},setGender:function(e){var t=JSON.parse(e);if(Array.isArray(t)){if(0===t.length)return void(this.selectedSexLimit=b.UNLIMI);if(t.length>0)return void(this.selectedSexLimit=b.LIMIT)}this.selectedSexLimit=""}}}),_=E,L=i("2877"),j=Object(L["a"])(_,d,c,!1,null,null,null),I=j.exports,k=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("el-form",{ref:"goodsBrandFormRef",attrs:{model:e.value,rules:e.goodsBrandFormRules,"label-width":"120px","label-suffix":"："}},[i("el-form-item",{attrs:{label:"品牌名称",prop:"brand_id"}},[i("el-select",{attrs:{placeholder:"请输入品牌名称"},model:{value:e.value.brand_id,callback:function(t){e.$set(e.value,"brand_id",t)},expression:"value.brand_id"}},e._l(e.brandOptions,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"关键词",prop:"keywords"}},[i("el-input",{model:{value:e.value.keywords,callback:function(t){e.$set(e.value,"keywords",t)},expression:"value.keywords"}})],1)],1)],1)},$=[],R=(i("0644"),{name:"EditGoodsBrandDetail",props:{value:Object,isEdit:{type:Boolean,default:!1}},data:function(){return{brandOptions:[],goodsBrandFormRules:{brand_id:[{required:!0,message:"请输入品牌名称",trigger:"change"}],keywords:[{required:!0,message:"请输入关键词",trigger:"blur"},{min:2,max:100,message:"长度在 2 到 100 个字符",trigger:"blur"}]}}},computed:{size:function(){return this.value.size}},watch:{size:{handler:function(e,t){this.isEdit&&Object(u["b"])(t)&&!Object(u["b"])(e)||(this.value.brand_id=""),this.getBrandOptions()},immediate:!0}},methods:{validate:function(){return this.$refs.goodsBrandFormRef.validate()},getData:function(e){return e},getBrandOptions:function(){var e=this;Object(l["b"])().then((function(t){e.brandOptions=t.data.list}))}}}),S=R,y=Object(L["a"])(S,k,$,!1,null,null,null),w=y.exports,D=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("el-form",{ref:"goodsFavFormRef",attrs:{model:e.value,rules:e.goodsFavFormRules,"label-width":"120px","label-suffix":"："}},[i("el-form-item",{attrs:{label:"产品",prop:"product"}},[i("el-select",{attrs:{placeholder:"请输入产品"},model:{value:e.value.product,callback:function(t){e.$set(e.value,"product",t)},expression:"value.product"}},e._l(e.productOptions,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"描述",prop:"desc"}},[i("el-input",{model:{value:e.value.desc,callback:function(t){e.$set(e.value,"desc",t)},expression:"value.desc"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"关键词",prop:"favorite"}},[i("el-input",{model:{value:e.value.favorite,callback:function(t){e.$set(e.value,"favorite",t)},expression:"value.favorite"}})],1)],1)],1)},G=[],B=(i("0644"),{name:"EditGoodsFavDetail",props:{value:Object,isEdit:{type:Boolean,default:!1}},data:function(){return{isFirst:!0,productOptions:[],goodsFavFormRules:{product:[{required:!0,message:"请输入产品",trigger:"blur"}]}}},computed:{brandId:function(){return this.value.brand_id}},watch:{brandId:{handler:function(e,t){var i=!Object(u["b"])(e)&&Object(u["b"])(t);this.isEdit&&i||(this.value.product=""),Object(u["b"])(e)||this.getProductOptions(e)},immediate:!0}},methods:{validate:function(){return this.$refs.goodsFavFormRef.validate()},getData:function(e){return e},getProductOptions:function(e){var t=this;return new Promise((function(i,a){Object(l["e"])(e).then((function(e){t.productOptions=e.data.list,i(e.data.list)})).catch((function(e){console.log(e),a(e)}))}))}}}),M=B,A=Object(L["a"])(M,D,G,!1,null,null,null),z=A.exports,C=i("0644"),N={name:"",price:"",brand_id:"",keywords:"",product:"",desc:"",favorite:""},T={name:"EditGoodsDetail",components:{EditGoodsInfoDetail:I,EditGoodsBrandDetail:w,EditGoodsFavDetail:z},props:{isEdit:{type:Boolean,default:!1}},data:function(){return{postForm:C(N),postFormRules:{},loading:!1}},created:function(){var e=this;if(this.isEdit){var t=this.$route.query.id;this.postForm.id=t,this.getDetail(this.postForm.id).then((function(){e.$refs.infoFormRef.initEdit()})).catch((function(e){console.log(e)}))}},methods:{showLoading:function(){this.loading=!0},hideLoading:function(){this.loading=!1},handleSumbit:function(){var e=this;Promise.all([this.$refs.postFormRef.validate(),this.$refs.infoFormRef.validate(),this.$refs.brandFormRef.validate(),this.$refs.favFormRef.validate()]).then((function(){var t=e.isEdit?l["f"]:l["a"],i=C(e.postForm);i=e.$refs.infoFormRef.getData(i),i=e.$refs.brandFormRef.getData(i),i=e.$refs.favFormRef.getData(i),e.showLoading(),t(JSON.stringify(i)).then((function(t){e.$message.success("".concat(e.isEdit?"编辑成功":"新增成功")),e.$router.push({name:"GoodsList",query:{flush:!0}})})).finally((function(){e.hideLoading()}))})).catch((function(e){return console.log(e),!1}))},handleCancel:function(){this.$router.back()},getDetail:function(e){var t=this;return new Promise((function(i,a){Object(l["d"])(e).then((function(e){var a=e.data;t.postForm=a,i(a)})).catch((function(e){console.log(e),a(e)}))}))}}},q=T,P=Object(L["a"])(q,r,s,!1,null,null,null);t["a"]=P.exports},5141:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("EditGoodsDetail",{attrs:{"is-edit":!1}})],1)},n=[],o=i("0e9d"),r={name:"AddGoods",components:{EditGoodsDetail:o["a"]}},s=r,l=i("2877"),u=Object(l["a"])(s,a,n,!1,null,null,null);t["default"]=u.exports},c40e:function(e,t,i){"use strict";i.d(t,"c",(function(){return n})),i.d(t,"d",(function(){return o})),i.d(t,"b",(function(){return r})),i.d(t,"e",(function(){return s})),i.d(t,"a",(function(){return l})),i.d(t,"f",(function(){return u}));var a=i("b775");function n(e){return Object(a["a"])({url:"/goods/list",method:"get",params:e})}function o(e){return Object(a["a"])({url:"/goods/list/".concat(e),method:"get"})}function r(){return Object(a["a"])({url:"/goods/brand/options",method:"get"})}function s(e){return Object(a["a"])({url:"/goods/product/options",method:"get",params:{id:e}})}function l(e){return Object(a["a"])({url:"/goods/list",method:"post",data:e})}function u(e){return Object(a["a"])({url:"/goods/list",method:"put",data:e})}},ed08:function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return o}));i("456d"),i("ac6a"),i("28a5"),i("f576"),i("6b54"),i("3b2b"),i("a481");var a=i("7618");function n(e,t){var i=[];for(var a in e){var n=e[a],o=t[n];i.push({id:n,name:o})}return i}function o(e){return""===e||void 0===e||null===e||"object"===Object(a["a"])(e)&&(Array.isArray(e)?0===e.length:0===Object.keys(e).length)}}}]);